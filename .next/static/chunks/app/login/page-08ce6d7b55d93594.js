(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2898:function(e,r,t){"use strict";t.d(r,{Z:function(){return createLucideIcon}});var n=t(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,r)=>{let t=(0,n.forwardRef)(({color:t="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:u="",children:l,...c},d)=>(0,n.createElement)("svg",{ref:d,...s,width:a,height:a,stroke:t,strokeWidth:i?24*Number(o)/Number(a):o,className:["lucide",`lucide-${toKebabCase(e)}`,u].join(" "),...c},[...r.map(([e,r])=>(0,n.createElement)(e,r)),...Array.isArray(l)?l:[l]]));return t.displayName=`${e}`,t}},7216:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1097:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},2247:function(e,r,t){Promise.resolve().then(t.bind(t,7355))},7355:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return LoginPage}});var n=t(7437),s=t(2265),a=t(4033),o=t(3549),i=t(4935);function LoginPage(){let{user:e,loading:r}=(0,o.useAuth)(),t=(0,a.useRouter)();return((0,s.useEffect)(()=>{e&&!r&&t.push("/")},[e,r,t]),r)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e?null:(0,n.jsx)(i.Z,{})}},4935:function(e,r,t){"use strict";t.d(r,{Z:function(){return LoginForm}});var n=t(7437),s=t(2265),a=t(4033),o=t(1097),i=t(7216),u=t(9670),l=t(3549);function LoginForm(e){let{onLoginSuccess:r}=e,{login:t}=(0,l.useAuth)(),[c,d]=(0,s.useState)({username:"",password:""}),[h,m]=(0,s.useState)(!1),[f,p]=(0,s.useState)(!1),[y,x]=(0,s.useState)("");(0,a.useRouter)();let handleSubmit=async e=>{e.preventDefault(),p(!0),x("");try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),n=await e.json();n.success?(t(n.user),null==r||r(n.user)):x(n.error||"Login failed")}catch(e){console.error("Login error:",e),x("An error occurred during login")}finally{p(!1)}},handleInputChange=e=>{let{name:r,value:t}=e.target;d(e=>({...e,[r]:t}))};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-primary-100",children:(0,n.jsx)(o.Z,{className:"h-6 w-6 text-primary-600"})}),(0,n.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,n.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Training Management System"})]}),(0,n.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:handleSubmit,children:[(0,n.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"username",className:"sr-only",children:"Username"}),(0,n.jsx)("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Username",value:c.username,onChange:handleInputChange})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,n.jsx)("input",{id:"password",name:"password",type:h?"text":"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password",value:c.password,onChange:handleInputChange}),(0,n.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!h),children:h?(0,n.jsx)(i.Z,{className:"h-5 w-5 text-gray-400"}):(0,n.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})})]})]}),y&&(0,n.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:"ml-3",children:(0,n.jsx)("h3",{className:"text-sm font-medium text-red-800",children:y})})})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:f,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:f?(0,n.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,n.jsx)(o.Z,{className:"h-5 w-5 text-primary-500 group-hover:text-primary-400"})}),"Sign in"]})})})]})]})})}},3549:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var n=t(7437),s=t(2265);let a=(0,s.createContext)(void 0);function AuthProvider(e){let{children:r}=e,[t,o]=(0,s.useState)(null),[i,u]=(0,s.useState)(!0),checkAuth=async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let r=await e.json();r.success&&o(r.user)}}catch(e){console.error("Auth check failed:",e)}finally{u(!1)}},logout=async()=>{try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){console.error("Logout failed:",e)}finally{o(null)}};return(0,s.useEffect)(()=>{checkAuth()},[]),(0,n.jsx)(a.Provider,{value:{user:t,loading:i,login:e=>{o(e)},logout,checkAuth},children:r})}function useAuth(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},622:function(e,r,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=t(2265),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function q(e,r,t){var n,a={},l=null,c=null;for(n in void 0!==t&&(l=""+t),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(c=r.ref),r)o.call(r,n)&&!u.hasOwnProperty(n)&&(a[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===a[n]&&(a[n]=r[n]);return{$$typeof:s,type:e,key:l,ref:c,props:a,_owner:i.current}}r.Fragment=a,r.jsx=q,r.jsxs=q},7437:function(e,r,t){"use strict";e.exports=t(622)},4033:function(e,r,t){e.exports=t(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=2247)}),_N_E=e.O()}]);