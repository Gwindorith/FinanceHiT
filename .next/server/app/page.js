(()=>{var e={};e.id=931,e.ids=[931],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},2390:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>d});var r=a(7096),s=a(6132),n=a(7284),i=a.n(n),l=a(2564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(t,c);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8203)),"C:\\Users\\wesle\\OneDrive\\Documenten\\Wesley code\\Finance\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2540)),"C:\\Users\\wesle\\OneDrive\\Documenten\\Wesley code\\Finance\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\wesle\\OneDrive\\Documenten\\Wesley code\\Finance\\src\\app\\page.tsx"],m="/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9245:(e,t,a)=>{Promise.resolve().then(a.bind(a,6594))},6594:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Home});var r=a(784),s=a(9885),n=a(1866),i=a(9763),l=a(1672),c=a(4782),d=a(9494),o=a(6303),m=a(6558),x=a(3894),p=a(5830);function ParticipantsTable({trainingInvoiceId:e}){let[t,a]=(0,s.useState)([]),[n,i]=(0,s.useState)(!0),[l,c]=(0,s.useState)(null),[d,o]=(0,s.useState)({name:"",email:"",company:""}),[m,x]=(0,s.useState)(null),[p,u]=(0,s.useState)({name:"",email:"",company:""}),fetchParticipants=async()=>{i(!0);try{let t=await fetch(`/api/participants?training_invoice_id=${e}`),r=await t.json();r.success?a(r.data):c(r.error||"Failed to fetch participants")}catch(e){c("Failed to fetch participants")}finally{i(!1)}};(0,s.useEffect)(()=>{fetchParticipants()},[e]);let handleAdd=async r=>{r.preventDefault(),c(null);try{let r=await fetch(`/api/participants?training_invoice_id=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),s=await r.json();s.success?(a([...t,s.data]),o({name:"",email:"",company:""})):c(s.error||"Failed to add participant")}catch(e){c("Failed to add participant")}},handleEdit=e=>{x(e.id),u({name:e.name,email:e.email,company:e.company})},handleEditSave=async e=>{c(null);try{let r=await fetch(`/api/participants/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),s=await r.json();s.success?(a(t.map(t=>t.id===e?s.data:t)),x(null)):c(s.error||"Failed to update participant")}catch(e){c("Failed to update participant")}},handleDelete=async e=>{c(null);try{let r=await fetch(`/api/participants/${e}`,{method:"DELETE"}),s=await r.json();s.success?a(t.filter(t=>t.id!==e)):c(s.error||"Failed to delete participant")}catch(e){c("Failed to delete participant")}};return(0,r.jsxs)("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Participants"}),l&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2 mb-2 text-red-800",children:l}),(0,r.jsxs)("form",{onSubmit:handleAdd,className:"mb-4 flex flex-col md:flex-row gap-2",children:[r.jsx("input",{type:"text",placeholder:"Name",className:"input-field text-black",value:d.name,onChange:e=>o({...d,name:e.target.value}),required:!0}),r.jsx("input",{type:"email",placeholder:"Email",className:"input-field text-black",value:d.email,onChange:e=>o({...d,email:e.target.value}),required:!0}),r.jsx("input",{type:"text",placeholder:"Company",className:"input-field text-black",value:d.company,onChange:e=>o({...d,company:e.target.value}),required:!0}),r.jsx("button",{type:"submit",className:"btn-primary",children:"Add"})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-black",children:"Name"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-black",children:"Email"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-black",children:"Company"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider text-black",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"text-center py-4",children:"Loading..."})}):0===t.length?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"text-center py-4 text-gray-500",children:"No participants"})}):t.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-4 py-2 text-black",children:m===e.id?r.jsx("input",{type:"text",className:"input-field text-black",value:p.name,onChange:e=>u({...p,name:e.target.value}),required:!0}):e.name}),r.jsx("td",{className:"px-4 py-2 text-black",children:m===e.id?r.jsx("input",{type:"email",className:"input-field text-black",value:p.email,onChange:e=>u({...p,email:e.target.value}),required:!0}):e.email}),r.jsx("td",{className:"px-4 py-2 text-black",children:m===e.id?r.jsx("input",{type:"text",className:"input-field text-black",value:p.company,onChange:e=>u({...p,company:e.target.value}),required:!0}):e.company}),r.jsx("td",{className:"px-4 py-2 text-right text-black",children:m===e.id?(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{className:"btn-primary mr-2",onClick:()=>handleEditSave(e.id),children:"Save"}),r.jsx("button",{className:"btn-secondary",onClick:()=>x(null),children:"Cancel"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{className:"btn-secondary mr-2",onClick:()=>handleEdit(e),children:"Edit"}),r.jsx("button",{className:"btn-danger",onClick:()=>handleDelete(e.id),children:"Delete"})]})})]},e.id))})]})})]})}var u=a(6206),h=a(3482),g=a(2593),y=a(8732);function TrainingDayOptionsModal({isOpen:e,onClose:t,trainingDay:a,onSave:n}){let[i,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[o,m]=(0,s.useState)(!0),[x,p]=(0,s.useState)({room_rent_option_id:a.room_rent_option_id,lunch_catering_option_id:a.lunch_catering_option_id,dinner_catering_option_id:a.dinner_catering_option_id});(0,s.useEffect)(()=>{e&&(fetchOptions(),p({room_rent_option_id:a.room_rent_option_id,lunch_catering_option_id:a.lunch_catering_option_id,dinner_catering_option_id:a.dinner_catering_option_id}))},[e,a]);let fetchOptions=async()=>{m(!0);try{let[e,t]=await Promise.all([fetch("/api/training-room-rent-options"),fetch("/api/catering-options")]),a=await e.json(),r=await t.json();a.success&&l(a.data),r.success&&d(r.data)}catch(e){console.error("Failed to fetch options:",e)}finally{m(!1)}},getSelectedRoomName=()=>{let e=i.find(e=>e.id===x.room_rent_option_id);return e?`${e.name} (€${e.rent_per_hour.toFixed(2)}/hr)`:"No room selected"},getSelectedLunchName=()=>{let e=c.find(e=>e.id===x.lunch_catering_option_id);return e?`${e.name} (€${e.lunch_price_per_participant.toFixed(2)})`:"No lunch selected"},getSelectedDinnerName=()=>{let e=c.find(e=>e.id===x.dinner_catering_option_id);return e?`${e.name} (€${e.dinner_price_per_participant.toFixed(2)})`:"No dinner selected"};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Training Day Options"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(e=>{if(!e)return"";let t=new Date(e);return t.toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})(a.date)," • ",a.start_time," - ",a.end_time]})]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(u.Z,{className:"h-6 w-6"})})]}),o?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading options..."})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-3",children:[r.jsx(h.Z,{className:"h-5 w-5 text-gray-500 mr-2"}),r.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Training Room"})]}),(0,r.jsxs)("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:x.room_rent_option_id??"",onChange:e=>p(t=>({...t,room_rent_option_id:e.target.value?Number(e.target.value):null})),children:[r.jsx("option",{value:"",children:"Select a training room"}),i.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," - €",e.rent_per_hour.toFixed(2),"/hour"]},e.id))]}),x.room_rent_option_id&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",getSelectedRoomName()]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-3",children:[r.jsx(g.Z,{className:"h-5 w-5 text-gray-500 mr-2"}),r.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Lunch Catering"})]}),(0,r.jsxs)("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:x.lunch_catering_option_id??"",onChange:e=>p(t=>({...t,lunch_catering_option_id:e.target.value?Number(e.target.value):null})),children:[r.jsx("option",{value:"",children:"No lunch catering"}),c.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," - €",e.lunch_price_per_participant.toFixed(2)," per participant"]},e.id))]}),x.lunch_catering_option_id&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",getSelectedLunchName()]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-3",children:[r.jsx(y.Z,{className:"h-5 w-5 text-gray-500 mr-2"}),r.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Dinner Catering"})]}),(0,r.jsxs)("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:x.dinner_catering_option_id??"",onChange:e=>p(t=>({...t,dinner_catering_option_id:e.target.value?Number(e.target.value):null})),children:[r.jsx("option",{value:"",children:"No dinner catering"}),c.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," - €",e.dinner_price_per_participant.toFixed(2)," per participant"]},e.id))]}),x.dinner_catering_option_id&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",getSelectedDinnerName()]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Summary"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,r.jsxs)("div",{children:["• Room: ",getSelectedRoomName()]}),(0,r.jsxs)("div",{children:["• Lunch: ",getSelectedLunchName()]}),(0,r.jsxs)("div",{children:["• Dinner: ",getSelectedDinnerName()]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>{n(x),t()},className:"px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700",children:"Save Options"})]})]})}):null}let f=p.Ry({invoice_number:p.Z_().optional(),invoice_date:p.Z_().optional(),customer:p.Z_().min(1,"Customer is required"),training_name:p.Z_().min(1,"Training name is required"),training_dates:p.IX(p.Ry({date:p.Z_().min(1,"Date is required"),start_time:p.Z_().min(1,"Start time is required"),end_time:p.Z_().min(1,"End time is required"),room_rent_option_id:p.Rx().nullable().optional(),lunch_catering_option_id:p.Rx().nullable().optional(),dinner_catering_option_id:p.Rx().nullable().optional()})).min(1,"At least one date is required"),trainer_costs:p.Rx().min(0,"Trainer costs must be non-negative"),office_costs:p.Rx().min(0,"Office costs must be non-negative"),margin_percentage:p.Rx().min(0,"Margin percentage must be non-negative"),total_invoice_amount:p.Rx().min(0,"Total invoice amount must be non-negative")});function InvoiceForm({invoice:e,onSuccess:t,onCancel:a}){let[n,i]=(0,s.useState)(!1),[l,c]=(0,s.useState)(0),[d,o]=(0,s.useState)(1),[p,u]=(0,s.useState)(e?e.training_dates.map(e=>({date:e.date,start_time:e.start_time,end_time:e.end_time,room_rent_option_id:e.room_rent_option_id??null,lunch_catering_option_id:e.lunch_catering_option_id??null,dinner_catering_option_id:e.dinner_catering_option_id??null})):[{date:"",start_time:"09:00",end_time:"17:00",room_rent_option_id:null,lunch_catering_option_id:null,dinner_catering_option_id:null}]),[h,g]=(0,s.useState)("details"),[y,b]=(0,s.useState)(!1),[j,v]=(0,s.useState)(null);console.log("Training Dates:",p);let{register:N,handleSubmit:_,watch:w,setValue:k,control:C,formState:{errors:S}}=(0,m.cI)({resolver:(0,x.F)(f),defaultValues:e?{invoice_number:e.invoice_number??"",invoice_date:e.invoice_date??"",customer:e.customer,training_name:e.training_name,training_dates:e.training_dates,trainer_costs:e.trainer_costs,office_costs:e.office_costs,margin_percentage:e.margin_percentage,total_invoice_amount:e.total_invoice_amount}:{invoice_number:"",invoice_date:"",customer:"",training_name:"",training_dates:[{date:"",start_time:"09:00",end_time:"17:00",room_rent_option_id:null,lunch_catering_option_id:null,dinner_catering_option_id:null}],trainer_costs:0,office_costs:0,margin_percentage:25,total_invoice_amount:0}});(0,s.useEffect)(()=>{k("training_dates",p)},[p,k]),(0,s.useEffect)(()=>{0===p.length&&u([{date:"",start_time:"09:00",end_time:"17:00",room_rent_option_id:null,lunch_catering_option_id:null,dinner_catering_option_id:null}])},[p]);let F=w(["training_dates","trainer_costs","office_costs","margin_percentage"]);(0,s.useEffect)(()=>{let[e,t,a,r]=F;if(Array.isArray(e)){let t=Array.from(new Set(e.filter(e=>e.date).map(e=>e.date)));o(t.length)}if(void 0!==t&&void 0!==a&&void 0!==r){let e=t+a+t*(r/100);c(e),k("total_invoice_amount",e)}},[F,k]);let onSubmit=async a=>{i(!0);try{let r=e?`/api/training-invoices/${e.id}`:"/api/training-invoices",s=e?"PUT":"POST",n=await fetch(r,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),i=await n.json();i.success?t(i.data):alert(i.error||"Failed to save invoice")}catch(e){alert("Failed to save invoice")}finally{i(!1)}},handleOpenOptionsModal=e=>{v(e),b(!0)};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex border-b mb-4",children:[r.jsx("button",{className:`px-4 py-2 -mb-px border-b-2 font-medium focus:outline-none ${"details"===h?"border-primary-600 text-primary-700":"border-transparent text-gray-500"}`,onClick:()=>g("details"),children:"Invoice Details"}),e?.id&&r.jsx("button",{className:`px-4 py-2 -mb-px border-b-2 font-medium focus:outline-none ${"participants"===h?"border-primary-600 text-primary-700":"border-transparent text-gray-500"}`,onClick:()=>g("participants"),children:"Participants"})]}),"details"===h&&(0,r.jsxs)("form",{onSubmit:_(onSubmit),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"invoice_number",className:"block text-sm font-medium text-gray-700",children:"Invoice Number"}),r.jsx("input",{type:"text",id:"invoice_number",...N("invoice_number"),className:"input-field mt-1 text-black",placeholder:"Enter invoice number (optional)"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"invoice_date",className:"block text-sm font-medium text-gray-700",children:"Invoice Date *"}),r.jsx("input",{type:"date",id:"invoice_date",...N("invoice_date"),className:"input-field mt-1 text-black"}),S.invoice_date&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.invoice_date.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"customer",className:"block text-sm font-medium text-gray-700",children:"Customer *"}),r.jsx("input",{type:"text",id:"customer",...N("customer"),className:"input-field mt-1 text-black",placeholder:"Enter customer name"}),S.customer&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.customer.message})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"training_name",className:"block text-sm font-medium text-gray-700",children:"Training Name *"}),r.jsx("input",{type:"text",id:"training_name",...N("training_name"),className:"input-field mt-1 text-black",placeholder:"Enter training name"}),S.training_name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.training_name.message})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Training Dates *"}),r.jsx("div",{className:"space-y-2",children:p.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"date",value:e.date||"",onChange:e=>{let a=[...p];a[t]={...a[t],date:e.target.value},u(a)},className:"input-field text-black"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("label",{className:"text-xs text-gray-500 whitespace-nowrap",children:"Start:"}),r.jsx("input",{type:"time",value:e.start_time||"",onChange:e=>{let a=[...p];a[t]={...a[t],start_time:e.target.value},u(a)},className:"input-field text-black w-28",step:"900",required:!0,pattern:"[0-9]{2}:[0-9]{2}",inputMode:"numeric",lang:"en"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("label",{className:"text-xs text-gray-500 whitespace-nowrap",children:"End:"}),r.jsx("input",{type:"time",value:e.end_time||"",onChange:e=>{let a=[...p];a[t]={...a[t],end_time:e.target.value},u(a)},className:"input-field text-black w-28",step:"900",required:!0,pattern:"[0-9]{2}:[0-9]{2}",inputMode:"numeric",lang:"en"})]}),r.jsx("button",{type:"button",onClick:()=>handleOpenOptionsModal(t),className:"btn-secondary text-sm px-3 py-1",children:"Configure Options"}),r.jsx("button",{type:"button",onClick:()=>u(p.filter((e,a)=>a!==t)),className:"btn-secondary px-2 py-1",disabled:1===p.length,title:"Remove date",children:"–"})]},t))}),r.jsx("div",{className:"mt-2",children:r.jsx("button",{type:"button",onClick:()=>u([...p,{date:"",start_time:"09:00",end_time:"17:00",room_rent_option_id:null,lunch_catering_option_id:null,dinner_catering_option_id:null}]),className:"btn-primary text-sm px-3 py-1",title:"Add training date",children:"+ Add Training Date"})}),S.training_dates&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:Array.isArray(S.training_dates)?S.training_dates.map((e,t)=>e?.message&&(0,r.jsxs)("span",{children:[e.message,r.jsx("br",{})]},t)):S.training_dates?.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (Days)"}),r.jsx("input",{type:"number",value:d,readOnly:!0,className:"input-field mt-1 bg-gray-50 text-black"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"margin_percentage",className:"block text-sm font-medium text-gray-700",children:"Margin Percentage (%) *"}),r.jsx("input",{type:"number",id:"margin_percentage",...N("margin_percentage",{valueAsNumber:!0}),className:"input-field mt-1 text-black",min:"0",step:"0.01",placeholder:"25"}),S.margin_percentage&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.margin_percentage.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"trainer_costs",className:"block text-sm font-medium text-gray-700",children:"Trainer Costs (€) *"}),r.jsx("input",{type:"number",id:"trainer_costs",...N("trainer_costs",{valueAsNumber:!0}),className:"input-field mt-1 text-black",min:"0",step:"0.01",placeholder:"0.00"}),S.trainer_costs&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.trainer_costs.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"office_costs",className:"block text-sm font-medium text-gray-700",children:"Office Costs (€) *"}),r.jsx("input",{type:"number",id:"office_costs",...N("office_costs",{valueAsNumber:!0}),className:"input-field mt-1 text-black",min:"0",step:"0.01",placeholder:"0.00"}),S.office_costs&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.office_costs.message})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"total_invoice_amount",className:"block text-sm font-medium text-gray-700",children:"Total Invoice Amount (€) *"}),r.jsx("input",{type:"number",id:"total_invoice_amount",...N("total_invoice_amount",{valueAsNumber:!0}),className:"input-field mt-1 bg-gray-50 text-black",min:"0",step:"0.01",placeholder:"0.00",readOnly:!0}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Calculated automatically based on costs and margin"}),S.total_invoice_amount&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.total_invoice_amount.message})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx("button",{type:"button",onClick:a,className:"btn-secondary",disabled:n,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":e?"Update Invoice":"Create Invoice"})]})]}),"participants"===h&&e?.id&&r.jsx(ParticipantsTable,{trainingInvoiceId:e.id}),y&&null!==j&&r.jsx(TrainingDayOptionsModal,{isOpen:y,onClose:()=>b(!1),trainingDay:p[j],onSave:e=>{if(null!==j){let t=[...p];t[j]={...t[j],...e},u(t)}}})]})}function InvoiceList({invoices:e,onUpdate:t,onDelete:a}){let[m,x]=(0,s.useState)(null),[p,u]=(0,s.useState)(null),handleEdit=e=>{x(e)},handleDelete=async e=>{if(confirm("Are you sure you want to delete this training invoice?"))try{u(e);let t=await fetch(`/api/training-invoices/${e}`,{method:"DELETE"});if(t.ok)a(e);else{let e=await t.json();alert(e.error||"Failed to delete invoice")}}catch(e){alert("Failed to delete invoice")}finally{u(null)}};return 0===e.length?r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(i.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No training invoices"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first training invoice."})]})}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"card overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Invoice #"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Date"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-0 flex-1",children:"Training"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Days"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Costs"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Margin"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Total"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-0 flex-1",children:"Customer"}),r.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:e.invoice_number||r.jsx("span",{className:"text-gray-400 italic",children:"-"})})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:e.invoice_date?(0,n.Z)(new Date(e.invoice_date),"dd-MM-yyyy"):"-"})}),r.jsx("td",{className:"px-3 py-4",children:r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.training_name})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsx(l.Z,{className:"h-4 w-4 mr-1 text-gray-400"}),e.duration_days]})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:[(0,r.jsxs)("div",{children:["€",e.trainer_costs.toLocaleString("nl-NL",{minimumFractionDigits:0})]}),(0,r.jsxs)("div",{children:["€",e.office_costs.toLocaleString("nl-NL",{minimumFractionDigits:0})]})]})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:[e.margin_percentage,"%"]})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-sm font-medium text-gray-900",children:[r.jsx(c.Z,{className:"h-4 w-4 mr-1 text-green-600"}),"€",e.total_invoice_amount.toLocaleString("nl-NL",{minimumFractionDigits:0})]})}),r.jsx("td",{className:"px-3 py-4",children:r.jsx("div",{className:"text-sm text-gray-900 truncate",children:e.customer})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-1",children:[r.jsx("button",{onClick:()=>handleEdit(e),className:"text-primary-600 hover:text-primary-900 p-1",title:"Edit",children:r.jsx(d.Z,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>handleDelete(e.id),disabled:p===e.id,className:"text-red-600 hover:text-red-900 p-1 disabled:opacity-50",title:"Delete",children:r.jsx(o.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),m&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-[705px] mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Edit Training Invoice"}),r.jsx("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),r.jsx(InvoiceForm,{invoice:m,onSuccess:e=>{t(e),x(null)},onCancel:()=>x(null)})]})})]})}var b=a(9546),j=a(9816),v=a(8168);function AdminTasksTable({invoices:e,onUpdate:t}){let[a,l]=(0,s.useState)(null),handleCheckboxChange=async(e,a,r)=>{l(e);try{let s=await fetch(`/api/training-invoices/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({[a]:r})});if(s.ok){let e=await s.json();e.success&&t(e.data)}}catch(e){console.error("Failed to update task:",e)}finally{l(null)}},getFirstTrainingDate=e=>{if(!e||0===e.length)return"-";let t=e[0];return t.date?(0,n.Z)(new Date(t.date),"dd-MM-yyyy"):"-"};return 0===e.length?r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(b.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No training invoices"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create your first training invoice to see administrative tasks."})]})}):r.jsx("div",{className:"card overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-0 flex-1",children:"Training"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Date"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",title:"Trainer gemaild voor beschikbaarheid?",children:"Trainer Available"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",title:"Toegevoegd masterclass planning?",children:"Masterclass Planning"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",title:"Staat in aNS",children:"In LMS"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",title:"Trainer uitgenodigd agenda?",children:"Trainer Invited"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",title:"Kan verzamelfactuur verzonden worden door admin?",children:"Invoice Ready"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",title:"Verzamelfactuur verstuurd door admin naar Navara?",children:"Send to NAVARA"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-3 py-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.training_name}),r.jsx("div",{className:"text-sm text-gray-500 truncate",children:e.customer})]}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsx(i.Z,{className:"h-4 w-4 mr-1 text-gray-400"}),getFirstTrainingDate(e.training_dates)]})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>handleCheckboxChange(e.id,"trainer_availability_emailed",!e.trainer_availability_emailed),disabled:a===e.id,className:"flex items-center justify-center text-sm text-gray-900 hover:text-primary-600 disabled:opacity-50",children:e.trainer_availability_emailed?r.jsx(j.Z,{className:"h-5 w-5 text-green-600"}):r.jsx(v.Z,{className:"h-5 w-5 text-gray-400"})})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>handleCheckboxChange(e.id,"masterclass_planning_added",!e.masterclass_planning_added),disabled:a===e.id,className:"flex items-center justify-center text-sm text-gray-900 hover:text-primary-600 disabled:opacity-50",children:e.masterclass_planning_added?r.jsx(j.Z,{className:"h-5 w-5 text-green-600"}):r.jsx(v.Z,{className:"h-5 w-5 text-gray-400"})})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>handleCheckboxChange(e.id,"lms_updated",!e.lms_updated),disabled:a===e.id,className:"flex items-center justify-center text-sm text-gray-900 hover:text-primary-600 disabled:opacity-50",children:e.lms_updated?r.jsx(j.Z,{className:"h-5 w-5 text-green-600"}):r.jsx(v.Z,{className:"h-5 w-5 text-gray-400"})})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>handleCheckboxChange(e.id,"navara_event_agenda_updated",!e.navara_event_agenda_updated),disabled:a===e.id,className:"flex items-center justify-center text-sm text-gray-900 hover:text-primary-600 disabled:opacity-50",children:e.navara_event_agenda_updated?r.jsx(j.Z,{className:"h-5 w-5 text-green-600"}):r.jsx(v.Z,{className:"h-5 w-5 text-gray-400"})})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>handleCheckboxChange(e.id,"catering_ordered",!e.catering_ordered),disabled:a===e.id,className:"flex items-center justify-center text-sm text-gray-900 hover:text-primary-600 disabled:opacity-50",children:e.catering_ordered?r.jsx(j.Z,{className:"h-5 w-5 text-green-600"}):r.jsx(v.Z,{className:"h-5 w-5 text-gray-400"})})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>handleCheckboxChange(e.id,"trainer_invoice_received",!e.trainer_invoice_received),disabled:a===e.id,className:"flex items-center justify-center text-sm text-gray-900 hover:text-primary-600 disabled:opacity-50",children:e.trainer_invoice_received?r.jsx(j.Z,{className:"h-5 w-5 text-green-600"}):r.jsx(v.Z,{className:"h-5 w-5 text-gray-400"})})})]},e.id))})]})})})}var N=a(9518),_=a(2029),w=a(9458);function MultiSelect({options:e,value:t,onChange:a,placeholder:n="Select options...",label:i}){let[l,c]=(0,s.useState)(!1),d=(0,s.useRef)(null);(0,s.useEffect)(()=>{let handleClickOutside=e=>{d.current&&!d.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[]);let handleToggle=e=>{if("string"==typeof e){let r=t.includes(e)?t.filter(t=>t!==e):[...t,e];a(r)}else{let r=t.includes(e)?t.filter(t=>t!==e):[...t,e];a(r)}},removeItem=e=>{"string"==typeof e?a(t.filter(t=>t!==e)):a(t.filter(t=>t!==e))},getDisplayValue=t=>{if("string"==typeof t){let a=e.find(e=>e.value===t);return a?a.label:t}return t.toString()},o=t.map(e=>getDisplayValue(e)),checkIsSelected=e=>t.includes(e);return(0,r.jsxs)("div",{className:"relative",ref:d,children:[i&&r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i}),r.jsx("div",{className:"min-h-[42px] border border-gray-300 rounded-lg bg-white cursor-pointer hover:border-gray-400 focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent",onClick:()=>c(!l),children:(0,r.jsxs)("div",{className:"flex items-center justify-between p-2",children:[r.jsx("div",{className:"flex flex-wrap gap-1 flex-1 min-w-0",children:o.length>0?o.map((e,a)=>(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[e,r.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),removeItem(t[a])},className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-500 hover:bg-blue-200 hover:text-blue-700 transition-colors",children:r.jsx(u.Z,{className:"w-3 h-3"})})]},a)):r.jsx("span",{className:"text-gray-500",children:n})}),r.jsx(w.Z,{className:`h-4 w-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]})}),l&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:e.length>0?e.map((e,t)=>{let a="object"==typeof e?e.value:e,s="object"==typeof e?e.label:e.toString(),n=checkIsSelected(a);return r.jsx("div",{className:`px-3 py-2 cursor-pointer hover:bg-gray-50 transition-colors ${n?"bg-blue-50 text-gray-900":"text-gray-900"}`,onClick:()=>handleToggle(a),children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-4 h-4 border rounded mr-2 flex items-center justify-center ${n?"bg-blue-600 border-blue-600":"border-gray-300"}`,children:n&&r.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s]})},t)}):r.jsx("div",{className:"px-3 py-2 text-gray-500",children:"No options available"})})]})}function InvoiceFilters({onFilterChange:e,customers:t,months:a,years:n}){let i;let[l,c]=(0,s.useState)({search:"",customer:"",months:[],years:[],minAmount:"",maxAmount:""}),[d,o]=(0,s.useState)(!1),handleFilterChange=(t,a)=>{let r={...l,[t]:a};c(r),e(r)},m=""!==l.search||""!==l.customer||l.months.length>0||l.years.length>0||""!==l.minAmount||""!==l.maxAmount;return(0,r.jsxs)("div",{className:"card mb-4",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,r.jsxs)("div",{className:"relative flex-1 max-w-md",children:[r.jsx(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search training name, invoice number...",value:l.search,onChange:e=>handleFilterChange("search",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 bg-white"})]}),(0,r.jsxs)("button",{onClick:()=>o(!d),className:`flex items-center px-3 py-2 rounded-lg border ${d||m?"bg-primary-50 border-primary-200 text-primary-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(_.Z,{className:"h-4 w-4 mr-2"}),"Filters",m&&r.jsx("span",{className:"ml-2 bg-primary-600 text-white text-xs rounded-full px-2 py-1",children:(i=0,""!==l.search&&i++,""!==l.customer&&i++,l.months.length>0&&i++,l.years.length>0&&i++,""!==l.minAmount&&i++,""!==l.maxAmount&&i++,i)})]}),m&&(0,r.jsxs)("button",{onClick:()=>{let t={search:"",customer:"",months:[],years:[],minAmount:"",maxAmount:""};c(t),e(t)},className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-800",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-1"}),"Clear"]})]})}),d&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),(0,r.jsxs)("select",{value:l.customer,onChange:e=>handleFilterChange("customer",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 bg-white",children:[r.jsx("option",{value:"",children:"All customers"}),t.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),r.jsx("div",{children:r.jsx(MultiSelect,{options:a,value:l.months,onChange:e=>handleFilterChange("months",e),placeholder:"Select months...",label:"Months"})}),r.jsx("div",{children:r.jsx(MultiSelect,{options:n,value:l.years,onChange:e=>handleFilterChange("years",e),placeholder:"Select years...",label:"Years"})}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Amount (€)"}),r.jsx("input",{type:"number",placeholder:"0",value:l.minAmount,onChange:e=>handleFilterChange("minAmount",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 bg-white"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Amount (€)"}),r.jsx("input",{type:"number",placeholder:"∞",value:l.maxAmount,onChange:e=>handleFilterChange("maxAmount",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 bg-white"})]})]})]})}function AdminFilters({onFilterChange:e,customers:t,months:a,years:n}){let i;let[l,c]=(0,s.useState)({search:"",customer:"",months:[],years:[],taskStatus:""}),[d,o]=(0,s.useState)(!1),handleFilterChange=(t,a)=>{let r={...l,[t]:a};c(r),e(r)},m=""!==l.search||""!==l.customer||l.months.length>0||l.years.length>0||""!==l.taskStatus;return(0,r.jsxs)("div",{className:"card mb-4",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,r.jsxs)("div",{className:"relative flex-1 max-w-md",children:[r.jsx(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search training name...",value:l.search,onChange:e=>handleFilterChange("search",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 bg-white"})]}),(0,r.jsxs)("button",{onClick:()=>o(!d),className:`flex items-center px-3 py-2 rounded-lg border ${d||m?"bg-primary-50 border-primary-200 text-primary-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(_.Z,{className:"h-4 w-4 mr-2"}),"Filters",m&&r.jsx("span",{className:"ml-2 bg-primary-600 text-white text-xs rounded-full px-2 py-1",children:(i=0,""!==l.search&&i++,""!==l.customer&&i++,l.months.length>0&&i++,l.years.length>0&&i++,""!==l.taskStatus&&i++,i)})]}),m&&(0,r.jsxs)("button",{onClick:()=>{let t={search:"",customer:"",months:[],years:[],taskStatus:""};c(t),e(t)},className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-800",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-1"}),"Clear"]})]})}),d&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),(0,r.jsxs)("select",{value:l.customer,onChange:e=>handleFilterChange("customer",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 bg-white",children:[r.jsx("option",{value:"",children:"All customers"}),t.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),r.jsx("div",{children:r.jsx(MultiSelect,{options:a,value:l.months,onChange:e=>handleFilterChange("months",e),placeholder:"Select months...",label:"Months"})}),r.jsx("div",{children:r.jsx(MultiSelect,{options:n,value:l.years,onChange:e=>handleFilterChange("years",e),placeholder:"Select years...",label:"Years"})}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Status"}),(0,r.jsxs)("select",{value:l.taskStatus,onChange:e=>handleFilterChange("taskStatus",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 bg-white",children:[r.jsx("option",{value:"",children:"All tasks"}),r.jsx("option",{value:"completed",children:"Completed tasks"}),r.jsx("option",{value:"pending",children:"Pending tasks"})]})]})]})]})}function filterInvoices(e,t){return e.filter(e=>{if(t.search){let a=t.search.toLowerCase(),r=e.training_name.toLowerCase().includes(a)||e.invoice_number&&e.invoice_number.toLowerCase().includes(a)||e.customer.toLowerCase().includes(a);if(!r)return!1}if(t.customer&&e.customer!==t.customer)return!1;if(t.months&&t.months.length>0){let a=e.invoice_date?new Date(e.invoice_date):null;if(!a)return!1;let r=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;if(!t.months.includes(r))return!1}if(t.years&&t.years.length>0){let a=e.invoice_date?new Date(e.invoice_date):null;if(!a||!t.years.includes(a.getFullYear()))return!1}if(t.minAmount){let a=parseFloat(t.minAmount);if(e.total_invoice_amount<a)return!1}if(t.maxAmount){let a=parseFloat(t.maxAmount);if(e.total_invoice_amount>a)return!1}return!0})}function filterAdminTasks(e,t){return e.filter(e=>{if(t.search){let a=t.search.toLowerCase(),r=e.training_name.toLowerCase().includes(a)||e.customer.toLowerCase().includes(a);if(!r)return!1}if(t.customer&&e.customer!==t.customer)return!1;if(t.months&&t.months.length>0){let a=e.training_dates?.[0]?.date?new Date(e.training_dates[0].date):null;if(!a)return!1;let r=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;if(!t.months.includes(r))return!1}if(t.years&&t.years.length>0){let a=e.training_dates?.[0]?.date?new Date(e.training_dates[0].date):null;if(!a||!t.years.includes(a.getFullYear()))return!1}if(t.taskStatus){let a=[e.trainer_availability_emailed,e.masterclass_planning_added,e.lms_updated,e.navara_event_agenda_updated,e.catering_ordered,e.trainer_invoice_received],r=a.filter(e=>e).length,s=a.length;if("completed"===t.taskStatus&&r<s||"pending"===t.taskStatus&&r===s)return!1}return!0})}function getUniqueCustomers(e){let t=e.map(e=>e.customer);return Array.from(new Set(t)).sort()}function getAvailableMonths(e){let t=new Set;return e.forEach(e=>{if(e.invoice_date){let a=new Date(e.invoice_date),r=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;t.add(r)}e.training_dates&&e.training_dates.length>0&&e.training_dates.forEach(e=>{if(e.date){let a=new Date(e.date),r=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;t.add(r)}})}),Array.from(t).sort().map(e=>{let[t,a]=e.split("-"),r=new Date(parseInt(t),parseInt(a)-1);return{value:e,label:r.toLocaleDateString("en-US",{year:"numeric",month:"long"})}})}function getAvailableYears(e){let t=new Set;return e.forEach(e=>{if(e.invoice_date){let a=new Date(e.invoice_date);t.add(a.getFullYear())}e.training_dates&&e.training_dates.length>0&&e.training_dates.forEach(e=>{if(e.date){let a=new Date(e.date);t.add(a.getFullYear())}})}),Array.from(t).sort((e,t)=>t-e)}var k=a(3680),C=a(92),S=a(2385),F=a(8157);function UserManagement({onClose:e}){let[t,a]=(0,s.useState)([]),[n,i]=(0,s.useState)(!0),[l,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[p,u]=(0,s.useState)(null),[h,g]=(0,s.useState)(""),[y,f]=(0,s.useState)({username:"",email:"",password:"",role:"user",name:""}),[b,j]=(0,s.useState)({username:"",email:"",role:"user",name:""}),fetchUsers=async()=>{try{i(!0);let e=await fetch("/api/users"),t=await e.json();t.success?a(t.data):g(t.error||"Failed to fetch users")}catch(e){g("Failed to fetch users")}finally{i(!1)}};(0,s.useEffect)(()=>{fetchUsers()},[]);let handleCreateUser=async e=>{e.preventDefault(),g("");try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),r=await e.json();r.success?(a([...t,r.data]),c(!1),f({username:"",email:"",password:"",role:"user",name:""})):g(r.error||"Failed to create user")}catch(e){g("An error occurred while creating user")}},handleInputChange=e=>{let{name:t,value:a}=e.target;f(e=>({...e,[t]:a}))},handleEditInputChange=e=>{let{name:t,value:a}=e.target;j(e=>({...e,[t]:a}))},handleEditUser=e=>{u(e),j({username:e.username,email:e.email,role:e.role,name:e.name}),x(!0)},handleUpdateUser=async e=>{if(e.preventDefault(),p){g("");try{let e=await fetch(`/api/users/${p.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),r=await e.json();r.success?(a(t.map(e=>e.id===p.id?r.data:e)),x(!1),u(null),j({username:"",email:"",role:"user",name:""})):g(r.error||"Failed to update user")}catch(e){g("An error occurred while updating user")}}},handleDeleteUser=async e=>{if(confirm("Are you sure you want to delete this user?")){g("");try{let r=await fetch(`/api/users/${e}`,{method:"DELETE"}),s=await r.json();s.success?a(t.filter(t=>t.id!==e)):g(s.error||"Failed to delete user")}catch(e){g("An error occurred while deleting user")}}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"User Management"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),h&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:r.jsx("p",{className:"text-red-800",children:h})}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h4",{className:"text-md font-medium",children:["Users (",t.length,")"]}),(0,r.jsxs)("button",{onClick:()=>c(!0),className:"btn-primary flex items-center",children:[r.jsx(S.Z,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),n?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading users..."})]}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.username}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"admin"===e.role?"bg-red-100 text-red-800":"manager"===e.role?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:e.role})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString():"-"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[r.jsx("button",{onClick:()=>handleEditUser(e),className:"text-primary-600 hover:text-primary-900 mr-3",title:"Edit user",children:r.jsx(d.Z,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>e.id&&handleDeleteUser(e.id),className:`${1===e.id?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900"}`,title:1===e.id?"Cannot delete default admin user":"Delete user",disabled:1===e.id,children:r.jsx(o.Z,{className:"h-4 w-4"})})]})]},e.id))})]})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Create New User"}),r.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:handleCreateUser,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),r.jsx("input",{type:"text",name:"name",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:y.name,onChange:handleInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),r.jsx("input",{type:"text",name:"username",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:y.username,onChange:handleInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsx("input",{type:"email",name:"email",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:y.email,onChange:handleInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),r.jsx("input",{type:"password",name:"password",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:y.password,onChange:handleInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,r.jsxs)("select",{name:"role",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:y.role,onChange:handleInputChange,children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"manager",children:"Manager"}),r.jsx("option",{value:"admin",children:"Admin"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",children:"Create User"})]})]})]})}),m&&p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Edit User"}),r.jsx("button",{onClick:()=>{x(!1),u(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:handleUpdateUser,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),r.jsx("input",{type:"text",name:"name",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:b.name,onChange:handleEditInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),r.jsx("input",{type:"text",name:"username",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:b.username,onChange:handleEditInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsx("input",{type:"email",name:"email",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:b.email,onChange:handleEditInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,r.jsxs)("select",{name:"role",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:b.role,onChange:handleEditInputChange,children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"manager",children:"Manager"}),r.jsx("option",{value:"admin",children:"Admin"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{x(!1),u(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",children:"Update User"})]})]})]})})]})})}function OfficeManagement({onClose:e}){let[t,a]=(0,s.useState)("catering"),[n,i]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[m,x]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),[y,f]=(0,s.useState)(""),[b,j]=(0,s.useState)({name:"",description:"",lunch_price_per_participant:"",dinner_price_per_participant:"",is_active:!0}),[v,N]=(0,s.useState)({name:"",description:"",lunch_price_per_participant:"",dinner_price_per_participant:"",is_active:!0}),[_,w]=(0,s.useState)([]),[k,C]=(0,s.useState)(!0),[F,A]=(0,s.useState)(!1),[D,E]=(0,s.useState)(!1),[O,I]=(0,s.useState)(null),[T,Z]=(0,s.useState)(""),[R,U]=(0,s.useState)({name:"",description:"",rent_per_hour:"",is_active:!0}),[P,q]=(0,s.useState)({name:"",description:"",rent_per_hour:"",is_active:!0}),fetchCateringOptions=async()=>{try{c(!0);let e=await fetch("/api/catering-options"),t=await e.json();t.success?i(t.data):f(t.error||"Failed to fetch catering options")}catch(e){f("Failed to fetch catering options")}finally{c(!1)}};(0,s.useEffect)(()=>{fetchCateringOptions()},[]);let fetchRentOptions=async()=>{try{C(!0);let e=await fetch("/api/training-room-rent-options"),t=await e.json();t.success?w(t.data):Z(t.error||"Failed to fetch rent options")}catch(e){Z("Failed to fetch rent options")}finally{C(!1)}};(0,s.useEffect)(()=>{fetchRentOptions()},[]);let handleCreateOption=async e=>{e.preventDefault(),f("");try{let e=await fetch("/api/catering-options",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,lunch_price_per_participant:Number(b.lunch_price_per_participant),dinner_price_per_participant:Number(b.dinner_price_per_participant)})}),t=await e.json();t.success?(i([...n,t.data]),x(!1),j({name:"",description:"",lunch_price_per_participant:"",dinner_price_per_participant:"",is_active:!0})):f(t.error||"Failed to create catering option")}catch(e){f("An error occurred while creating catering option")}},handleEditOption=e=>{g(e),N({name:e.name,description:e.description||"",lunch_price_per_participant:e.lunch_price_per_participant.toString(),dinner_price_per_participant:e.dinner_price_per_participant.toString(),is_active:e.is_active??!0}),u(!0)},handleUpdateOption=async e=>{if(e.preventDefault(),h){f("");try{let e=await fetch(`/api/catering-options/${h.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...v,lunch_price_per_participant:Number(v.lunch_price_per_participant),dinner_price_per_participant:Number(v.dinner_price_per_participant)})}),t=await e.json();t.success?(i(n.map(e=>e.id===h.id?t.data:e)),u(!1),g(null),N({name:"",description:"",lunch_price_per_participant:"",dinner_price_per_participant:"",is_active:!0})):f(t.error||"Failed to update catering option")}catch(e){f("An error occurred while updating catering option")}}},handleDeleteOption=async e=>{if(confirm("Are you sure you want to delete this catering option?")){f("");try{let t=await fetch(`/api/catering-options/${e}`,{method:"DELETE"}),a=await t.json();a.success?i(n.filter(t=>t.id!==e)):f(a.error||"Failed to delete catering option")}catch(e){f("An error occurred while deleting catering option")}}},handleCreateRentOption=async e=>{e.preventDefault(),Z("");try{let e=await fetch("/api/training-room-rent-options",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...R,rent_per_hour:Number(R.rent_per_hour)})}),t=await e.json();t.success?(w([..._,t.data]),A(!1),U({name:"",description:"",rent_per_hour:"",is_active:!0})):Z(t.error||"Failed to create rent option")}catch(e){Z("An error occurred while creating rent option")}},handleEditRentOption=e=>{I(e),q({name:e.name,description:e.description||"",rent_per_hour:e.rent_per_hour.toString(),is_active:e.is_active??!0}),E(!0)},handleUpdateRentOption=async e=>{if(e.preventDefault(),O){Z("");try{let e=await fetch(`/api/training-room-rent-options/${O.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...P,rent_per_hour:Number(P.rent_per_hour)})}),t=await e.json();t.success?(w(_.map(e=>e.id===O.id?t.data:e)),E(!1),I(null),q({name:"",description:"",rent_per_hour:"",is_active:!0})):Z(t.error||"Failed to update rent option")}catch(e){Z("An error occurred while updating rent option")}}},handleDeleteRentOption=async e=>{if(confirm("Are you sure you want to delete this training room rent option?")){Z("");try{let t=await fetch(`/api/training-room-rent-options/${e}`,{method:"DELETE"}),a=await t.json();a.success?w(_.filter(t=>t.id!==e)):Z(a.error||"Failed to delete rent option")}catch(e){Z("An error occurred while deleting rent option")}}},handleInputChange=e=>{let{name:t,value:a,type:r}=e.target,s=e.target.checked;j(e=>({...e,[t]:"checkbox"===r?s:a}))},handleEditInputChange=e=>{let{name:t,value:a,type:r}=e.target,s=e.target.checked;N(e=>({...e,[t]:"checkbox"===r?s:a}))},handleRentInputChange=e=>{let{name:t,value:a,type:r}=e.target,s=e.target.checked;U(e=>({...e,[t]:"checkbox"===r?s:a}))},handleEditRentInputChange=e=>{let{name:t,value:a,type:r}=e.target,s=e.target.checked;q(e=>({...e,[t]:"checkbox"===r?s:a}))};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Office Management"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{onClick:()=>a("catering"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"catering"===t?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Catering Options"}),r.jsx("button",{onClick:()=>a("rent"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"rent"===t?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Training Room Rent"})]})}),y&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:r.jsx("p",{className:"text-red-800",children:y})}),T&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:r.jsx("p",{className:"text-red-800",children:T})}),"catering"===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h4",{className:"text-md font-medium text-gray-900",children:["Catering Options (",n.length,")"]}),(0,r.jsxs)("button",{onClick:()=>x(!0),className:"btn-primary flex items-center",children:[r.jsx(S.Z,{className:"h-4 w-4 mr-2"}),"Add Catering Option"]})]}),l?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading catering options..."})]}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lunch Price"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dinner Price"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:e.description||"-"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["€",e.lunch_price_per_participant.toFixed(2)]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["€",e.dinner_price_per_participant.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Active":"Inactive"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[r.jsx("button",{onClick:()=>handleEditOption(e),className:"text-primary-600 hover:text-primary-900 mr-3",title:"Edit catering option",children:r.jsx(d.Z,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>handleDeleteOption(e.id),className:"text-red-600 hover:text-red-900",title:"Delete catering option",children:r.jsx(o.Z,{className:"h-4 w-4"})})]})]},e.id))})]})}),m&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Catering Option"}),r.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:handleCreateOption,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),r.jsx("input",{type:"text",name:"name",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:b.name,onChange:handleInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),r.jsx("textarea",{name:"description",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:b.description,onChange:handleInputChange})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lunch Price (€) *"}),r.jsx("input",{type:"number",name:"lunch_price_per_participant",step:"0.01",min:"0",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:b.lunch_price_per_participant,onChange:handleInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dinner Price (€) *"}),r.jsx("input",{type:"number",name:"dinner_price_per_participant",step:"0.01",min:"0",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:b.dinner_price_per_participant,onChange:handleInputChange})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",name:"is_active",id:"is_active",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:b.is_active,onChange:handleInputChange}),r.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",children:"Create Option"})]})]})]})}),p&&h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Catering Option"}),r.jsx("button",{onClick:()=>{u(!1),g(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:handleUpdateOption,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),r.jsx("input",{type:"text",name:"name",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:v.name,onChange:handleEditInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),r.jsx("textarea",{name:"description",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:v.description,onChange:handleEditInputChange})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lunch Price (€) *"}),r.jsx("input",{type:"number",name:"lunch_price_per_participant",step:"0.01",min:"0",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:v.lunch_price_per_participant,onChange:handleEditInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dinner Price (€) *"}),r.jsx("input",{type:"number",name:"dinner_price_per_participant",step:"0.01",min:"0",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:v.dinner_price_per_participant,onChange:handleEditInputChange})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",name:"is_active",id:"edit_is_active",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:v.is_active,onChange:handleEditInputChange}),r.jsx("label",{htmlFor:"edit_is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{u(!1),g(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",children:"Update Option"})]})]})]})})]}),"rent"===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h4",{className:"text-md font-medium text-gray-900",children:["Training Room Rent Options (",_.length,")"]}),(0,r.jsxs)("button",{onClick:()=>A(!0),className:"btn-primary flex items-center",children:[r.jsx(S.Z,{className:"h-4 w-4 mr-2"}),"Add Rent Option"]})]}),k?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading rent options..."})]}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rent Per Hour"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:e.description||"-"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["€",e.rent_per_hour.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Active":"Inactive"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[r.jsx("button",{onClick:()=>handleEditRentOption(e),className:"text-primary-600 hover:text-primary-900 mr-3",title:"Edit rent option",children:r.jsx(d.Z,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>handleDeleteRentOption(e.id),className:"text-red-600 hover:text-red-900",title:"Delete rent option",children:r.jsx(o.Z,{className:"h-4 w-4"})})]})]},e.id))})]})})]}),F&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Add New Training Room Rent Option"}),r.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:handleCreateRentOption,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),r.jsx("input",{type:"text",name:"name",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:R.name,onChange:handleRentInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),r.jsx("textarea",{name:"description",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:R.description,onChange:handleRentInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rent Per Hour (€) *"}),r.jsx("input",{type:"number",name:"rent_per_hour",step:"0.01",min:"0",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:R.rent_per_hour,onChange:handleRentInputChange})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",name:"is_active",id:"is_active_rent",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:R.is_active,onChange:handleRentInputChange}),r.jsx("label",{htmlFor:"is_active_rent",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",children:"Create Option"})]})]})]})}),D&&O&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Edit Training Room Rent Option"}),r.jsx("button",{onClick:()=>{E(!1),I(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:handleUpdateRentOption,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),r.jsx("input",{type:"text",name:"name",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:P.name,onChange:handleEditRentInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),r.jsx("textarea",{name:"description",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:P.description,onChange:handleEditRentInputChange})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rent Per Hour (€) *"}),r.jsx("input",{type:"number",name:"rent_per_hour",step:"0.01",min:"0",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:P.rent_per_hour,onChange:handleEditRentInputChange})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",name:"is_active",id:"edit_is_active_rent",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:P.is_active,onChange:handleEditRentInputChange}),r.jsx("label",{htmlFor:"edit_is_active_rent",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{E(!1),I(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",children:"Update Option"})]})]})]})})]})})}var A=a(705);function Home(){let{user:e,logout:t}=(0,F.useAuth)(),[a,n]=(0,s.useState)([]),[i,c]=(0,s.useState)(!0),[d,o]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),[g,y]=(0,s.useState)(null),[f,v]=(0,s.useState)("invoices"),[N,_]=(0,s.useState)({search:"",customer:"",months:[],years:[],minAmount:"",maxAmount:""}),[w,D]=(0,s.useState)({search:"",customer:"",months:[],years:[],taskStatus:""}),fetchInvoices=async()=>{try{c(!0);let e=await fetch("/api/training-invoices"),t=await e.json();t.success?n(t.data):y(t.error||"Failed to fetch invoices")}catch(e){y("Failed to fetch invoices")}finally{c(!1)}};(0,s.useEffect)(()=>{fetchInvoices()},[]);let handleInvoiceUpdated=e=>{n(a.map(t=>t.id===e.id?e:t))},E=getUniqueCustomers(a),O=getAvailableMonths(a),I=getAvailableYears(a),T="invoices"===f?filterInvoices(a,N):filterAdminTasks(a,w),Z=T.reduce((e,t)=>e+t.total_invoice_amount,0),R=T.length;return i?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-primary-100 rounded-full",children:r.jsx(k.Z,{className:"h-5 w-5 text-primary-600"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e?.name}),r.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e?.role})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(e?.role==="admin"||e?.role==="manager")&&(0,r.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:[r.jsx(h.Z,{className:"h-4 w-4"}),r.jsx("span",{children:"Office"})]}),e?.role==="admin"&&(0,r.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:[r.jsx(l.Z,{className:"h-4 w-4"}),r.jsx("span",{children:"Users"})]}),(0,r.jsxs)("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:[r.jsx(C.Z,{className:"h-4 w-4"}),r.jsx("span",{children:"Logout"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(b.Z,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Trainings"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R})]})]})}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(b.Z,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["€",Z.toLocaleString("nl-NL",{minimumFractionDigits:2})]})]})]})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex space-x-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Training Management"}),(0,r.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,r.jsxs)("button",{className:`px-4 py-2 -mb-px border-b-2 font-medium text-sm focus:outline-none ${"invoices"===f?"border-primary-600 text-primary-700":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>v("invoices"),children:[r.jsx(b.Z,{className:"h-4 w-4 inline mr-2"}),"Invoices"]}),e?.role==="admin"&&(0,r.jsxs)("button",{className:`px-4 py-2 -mb-px border-b-2 font-medium text-sm focus:outline-none ${"admin"===f?"border-primary-600 text-primary-700":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>v("admin"),children:[r.jsx(j.Z,{className:"h-4 w-4 inline mr-2"}),"Administrative Tasks"]})]})]}),(0,r.jsxs)("button",{onClick:()=>o(!0),className:"btn-primary flex items-center",children:[r.jsx(S.Z,{className:"h-4 w-4 mr-2"}),"Add Training Invoice"]})]}),g&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800",children:g})}),d&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-[705px] mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Add New Training Invoice"}),r.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),r.jsx(InvoiceForm,{onSuccess:e=>{n([e,...a]),o(!1)},onCancel:()=>o(!1)})]})}),i?r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading invoices..."})]})}):(0,r.jsxs)(r.Fragment,{children:["invoices"===f&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(InvoiceFilters,{onFilterChange:_,customers:E,months:O,years:I}),r.jsx(InvoiceList,{invoices:T,onUpdate:handleInvoiceUpdated,onDelete:e=>{n(a.filter(t=>t.id!==e))}})]}),"admin"===f&&e?.role==="admin"&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(AdminFilters,{onFilterChange:D,customers:E,months:O,years:I}),r.jsx(AdminTasksTable,{invoices:T,onUpdate:handleInvoiceUpdated})]})]}),m&&r.jsx(UserManagement,{onClose:()=>x(!1)}),p&&r.jsx(OfficeManagement,{onClose:()=>u(!1)})]}):r.jsx(A.Z,{})}},8203:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>c});var r=a(5153);let s=(0,r.createProxy)(String.raw`C:\Users\wesle\OneDrive\Documenten\Wesley code\Finance\src\app\page.tsx`),{__esModule:n,$$typeof:i}=s,l=s.default,c=l}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[657,550,362,312,766,705],()=>__webpack_exec__(2390));module.exports=a})();